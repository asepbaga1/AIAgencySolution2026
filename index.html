<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Agency Solution 2026 | Kosmara Digital</title>
  <meta name="description" content="Solusi AI untuk bisnis modern. Chatbot, automation, dan digital transformation.">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    
    /* Chat Animation */
    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .message-enter {
      animation: slideUp 0.3s ease-out;
    }
    
    /* Floating button pulse */
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .pulse-animation {
      animation: pulse 2s infinite;
    }

    /* Scrollbar custom */
    .custom-scroll::-webkit-scrollbar {
      width: 6px;
    }
    .custom-scroll::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    .custom-scroll::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 3px;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen">

  <!-- Language Toggle -->
  <div class="fixed top-4 right-4 z-50">
    <button id="langToggle" class="bg-white px-4 py-2 rounded-lg shadow-md hover:shadow-lg transition-all font-medium text-sm">
      <span id="langIcon">ðŸ‡®ðŸ‡©</span> <span id="langText">ID</span>
    </button>
  </div>

  <!-- Hero Section -->
  <section class="container mx-auto px-4 py-20 max-w-5xl">
    <div class="text-center mb-12">
      <h1 class="text-5xl md:text-6xl font-black mb-6 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent" data-lang="hero-title">
        Transformasi Bisnis dengan AI
      </h1>
      <p class="text-xl text-gray-700 mb-8 max-w-2xl mx-auto" data-lang="hero-subtitle">
        Otomasi pintar, chatbot cerdas, dan solusi digital yang menghasilkan konversi nyata.
      </p>
      <button id="startChatBtn" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-full font-bold text-lg shadow-xl hover:shadow-2xl transition-all transform hover:scale-105" data-lang="cta-main">
        Mulai Konsultasi Gratis
      </button>
    </div>

    <!-- Features Grid -->
    <div class="grid md:grid-cols-3 gap-6 mt-16">
      <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all">
        <div class="text-4xl mb-4">ðŸ¤–</div>
        <h3 class="text-xl font-bold mb-2" data-lang="feature-1-title">Chatbot AI</h3>
        <p class="text-gray-600" data-lang="feature-1-desc">Lead qualification otomatis 24/7</p>
      </div>
      <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all">
        <div class="text-4xl mb-4">âš¡</div>
        <h3 class="text-xl font-bold mb-2" data-lang="feature-2-title">Automation</h3>
        <p class="text-gray-600" data-lang="feature-2-desc">Hemat waktu hingga 80%</p>
      </div>
      <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all">
        <div class="text-4xl mb-4">ðŸ“ˆ</div>
        <h3 class="text-xl font-bold mb-2" data-lang="feature-3-title">ROI Terbukti</h3>
        <p class="text-gray-600" data-lang="feature-3-desc">Konversi terukur & transparan</p>
      </div>
    </div>
  </section>

  <!-- Floating Chat Button -->
  <button id="chatFloatBtn" class="fixed bottom-6 right-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transition-all z-40 pulse-animation">
    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
    </svg>
  </button>

  <!-- Chat Modal -->
  <div id="chatModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-end md:items-center justify-center">
    <div class="bg-white w-full md:w-[480px] md:h-[680px] h-[90vh] rounded-t-3xl md:rounded-3xl shadow-2xl flex flex-col">
      
      <!-- Chat Header -->
      <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-3xl md:rounded-t-3xl flex justify-between items-center">
        <div>
          <h3 class="font-bold text-lg" data-lang="chat-title">Konsultan AI</h3>
          <p class="text-sm opacity-90" data-lang="chat-status">Online â€¢ Siap membantu</p>
        </div>
        <button id="closeChat" class="text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-full transition-all">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Chat Messages -->
      <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-4 custom-scroll bg-gray-50">
        <!-- Initial bot message -->
        <div class="flex items-start gap-3">
          <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold flex-shrink-0">AI</div>
          <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm max-w-[75%]">
            <p class="text-gray-800 text-sm" data-lang="chat-initial">Halo! Saya siap membantu Anda. Apa yang bisa saya bantu hari ini?</p>
          </div>
        </div>
      </div>

      <!-- Chat Input -->
      <div class="p-4 border-t bg-white rounded-b-3xl md:rounded-b-3xl">
        <form id="chatForm" class="flex gap-2">
          <input 
            type="text" 
            id="chatInput" 
            placeholder="Ketik pesan..." 
            data-lang-placeholder="chat-placeholder"
            class="flex-1 px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
            autocomplete="off"
          />
          <button 
            type="submit" 
            id="sendBtn"
            class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
            </svg>
          </button>
        </form>
        <p class="text-xs text-gray-500 mt-2 text-center" data-lang="chat-footer">Powered by Gemini AI</p>
      </div>

    </div>
  </div>

  <!-- Translation Data -->
  <script>
    const translations = {
      id: {
        'hero-title': 'Transformasi Bisnis dengan AI',
        'hero-subtitle': 'Otomasi pintar, chatbot cerdas, dan solusi digital yang menghasilkan konversi nyata.',
        'cta-main': 'Mulai Konsultasi Gratis',
        'feature-1-title': 'Chatbot AI',
        'feature-1-desc': 'Lead qualification otomatis 24/7',
        'feature-2-title': 'Automation',
        'feature-2-desc': 'Hemat waktu hingga 80%',
        'feature-3-title': 'ROI Terbukti',
        'feature-3-desc': 'Konversi terukur & transparan',
        'chat-title': 'Konsultan AI',
        'chat-status': 'Online â€¢ Siap membantu',
        'chat-initial': 'Halo! Saya siap membantu Anda. Apa yang bisa saya bantu hari ini?',
        'chat-placeholder': 'Ketik pesan...',
        'chat-footer': 'Powered by Gemini AI'
      },
      en: {
        'hero-title': 'Business Transformation with AI',
        'hero-subtitle': 'Smart automation, intelligent chatbots, and digital solutions that drive real conversions.',
        'cta-main': 'Start Free Consultation',
        'feature-1-title': 'AI Chatbot',
        'feature-1-desc': 'Automated lead qualification 24/7',
        'feature-2-title': 'Automation',
        'feature-2-desc': 'Save up to 80% of time',
        'feature-3-title': 'Proven ROI',
        'feature-3-desc': 'Measurable & transparent conversions',
        'chat-title': 'AI Consultant',
        'chat-status': 'Online â€¢ Ready to help',
        'chat-initial': 'Hello! I\'m ready to assist you. What can I help you with today?',
        'chat-placeholder': 'Type a message...',
        'chat-footer': 'Powered by Gemini AI'
      }
    };

    let currentLang = 'id';
    let chatHistory = [];

    // Language toggle
    document.getElementById('langToggle').addEventListener('click', () => {
      currentLang = currentLang === 'id' ? 'en' : 'id';
      updateLanguage();
    });

    function updateLanguage() {
      document.querySelectorAll('[data-lang]').forEach(el => {
        const key = el.getAttribute('data-lang');
        if (translations[currentLang][key]) {
          el.textContent = translations[currentLang][key];
        }
      });

      document.querySelectorAll('[data-lang-placeholder]').forEach(el => {
        const key = el.getAttribute('data-lang-placeholder');
        if (translations[currentLang][key]) {
          el.placeholder = translations[currentLang][key];
        }
      });

      document.getElementById('langIcon').textContent = currentLang === 'id' ? 'ðŸ‡®ðŸ‡©' : 'ðŸ‡¬ðŸ‡§';
      document.getElementById('langText').textContent = currentLang.toUpperCase();
    }

    // Chat Modal Controls
    const chatModal = document.getElementById('chatModal');
    const chatFloatBtn = document.getElementById('chatFloatBtn');
    const startChatBtn = document.getElementById('startChatBtn');
    const closeChat = document.getElementById('closeChat');

    function openChat() {
      chatModal.classList.remove('hidden');
      chatModal.classList.add('flex');
      document.body.style.overflow = 'hidden';
    }

    function closeModalChat() {
      chatModal.classList.add('hidden');
      chatModal.classList.remove('flex');
      document.body.style.overflow = 'auto';
    }

    chatFloatBtn.addEventListener('click', openChat);
    startChatBtn.addEventListener('click', openChat);
    closeChat.addEventListener('click', closeModalChat);

    // Close on backdrop click
    chatModal.addEventListener('click', (e) => {
      if (e.target === chatModal) closeModalChat();
    });

    // Chat functionality
    const chatForm = document.getElementById('chatForm');
    const chatInput = document.getElementById('chatInput');
    const chatMessages = document.getElementById('chatMessages');
    const sendBtn = document.getElementById('sendBtn');

    function addMessage(content, role = 'user') {
      const messageDiv = document.createElement('div');
      messageDiv.className = `flex items-start gap-3 message-enter ${role === 'user' ? 'flex-row-reverse' : ''}`;

      const avatar = document.createElement('div');
      avatar.className = `w-8 h-8 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0 ${
        role === 'user' 
          ? 'bg-gray-700' 
          : 'bg-gradient-to-r from-blue-600 to-purple-600'
      }`;
      avatar.textContent = role === 'user' ? 'U' : 'AI';

      const bubble = document.createElement('div');
      bubble.className = `p-3 rounded-2xl shadow-sm max-w-[75%] ${
        role === 'user' 
          ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-tr-none' 
          : 'bg-white text-gray-800 rounded-tl-none'
      }`;

      const text = document.createElement('p');
      text.className = 'text-sm whitespace-pre-wrap';
      text.textContent = content;

      bubble.appendChild(text);
      messageDiv.appendChild(avatar);
      messageDiv.appendChild(bubble);
      chatMessages.appendChild(messageDiv);

      // Scroll to bottom
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function showTypingIndicator() {
      const typing = document.createElement('div');
      typing.id = 'typingIndicator';
      typing.className = 'flex items-start gap-3 message-enter';
      typing.innerHTML = `
        <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold flex-shrink-0">AI</div>
        <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm">
          <div class="flex gap-1">
            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
          </div>
        </div>
      `;
      chatMessages.appendChild(typing);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function removeTypingIndicator() {
      const typing = document.getElementById('typingIndicator');
      if (typing) typing.remove();
    }

    async function sendMessage(message) {
      if (!message.trim()) return;

      // Disable input
      sendBtn.disabled = true;
      chatInput.disabled = true;

      // Add user message
      addMessage(message, 'user');
      chatHistory.push({ role: 'user', content: message });

      // Clear input
      chatInput.value = '';

      // Show typing
      showTypingIndicator();

      try {
        const response = await fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            message,
            history: chatHistory 
          })
        });

        const data = await response.json();

        removeTypingIndicator();

        if (data.success && data.reply) {
          addMessage(data.reply, 'bot');
          chatHistory.push({ role: 'assistant', content: data.reply });
        } else {
          throw new Error(data.message || 'Unknown error');
        }

      } catch (error) {
        removeTypingIndicator();
        console.error('Chat error:', error);
        addMessage(
          currentLang === 'id' 
            ? 'Maaf, terjadi kesalahan. Silakan coba lagi atau hubungi kami via WhatsApp.' 
            : 'Sorry, an error occurred. Please try again or contact us via WhatsApp.',
          'bot'
        );
      } finally {
        // Re-enable input
        sendBtn.disabled = false;
        chatInput.disabled = false;
        chatInput.focus();
      }
    }

    // Form submit
    chatForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const message = chatInput.value;
      sendMessage(message);
    });

    // Initialize
    updateLanguage();
  </script>

</body>
</html>